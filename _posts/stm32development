download Linux 64-bit https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads
open a bash on Windows prompt
mkdir arm
cd arm
tar xvf the downloaded file
export arm_bin=~/Downloads/arm/gcc-arm-none-eabi-6-2017-q1-update/bin
export PATH=$PATH:$arm_bin
Code Generator: copy only the neccessary library files

Install STMCubeMX
run it, pick a board, config, adjust Project Settings 
Toolchain/IDE to Makefile

Edit project makefile, adjust BINPATH like so:
BINPATH = ~/Downloads/arm/gcc-arm-none-eabi-6-2017-q1-update/bin 

Edit the main.c as required.

from the windows command prompt:
cd to generated source file directory
bash -c "make" #compiles the various files

Use STM32 ST-Link Utility to Program & Verify
can probably do this as the st-link cli
